{% extends 'application/base.html' %}

{% block content %}
    <h1>Staging Area</h1>
    
    {% if nameTable %}
        <h1>TABLE</h1>
        <table border=1>
            <caption> {{nameTable}} </caption>
            <tr>
                <th>COLUMN</th>
                <th>TYPE</th>
                <th>EXPRESSION</th>
            </tr>
            {% for key,value in dictionarieWithColumnsAndTypes.items %}
            <tr>
                <td>{{key}}</td>
                <td>{{value}}</td>
                {% comment %} <td> <button type="" data-bs-toggle='modal' data-bs-target='#modalTest' id="{{key}}" onclick="setClassToForms('{{key}}');">Adicionar </button> </td> {% endcomment %}
                <td> <a class="btn btn-info open-modal" data-url="{% url 'application:modal' %}">Edit</a> </td>
            </tr>
            {% endfor %}
        </table>
        <button type="submit">Add column</button>
    {% endif %}

    <h1>Datas</h1>

    {% if data %}
        <table border=1>
            <caption>{{nameTable}}</caption>
            <tr>
                {% for column in listColumns %}
                    <th> {{column}} </th>
                {% endfor %}
            </tr>
            {% for row in data %}
             <tr>
                {% for cedule in row %}
                    <td> {{cedule}} </td>  
                {% endfor %}
            </tr>            
            {% endfor %}
        </table>
    
    <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


    {% endif %}

    <script>
        var modalDiv = $("#modal-div");

        $('.open-modal').on('click', function(){
            console.log('teste de chamada')
            $.ajax({
                url:$(this).attr('data-url'),
                sucess: function(data){
                    modalDiv.html(data);
                    $("#modalTest").modal();
                }
            });
        });

        console.log(modalDiv);
    </script>
{% endblock content %}